<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Qiddiya Resort Core District</title>

<!-- Brand Font -->
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
:root {
  --primary: #294145;
  --secondary: #5D855E;
  --accent: #86B85E;
  --light: #E6F0DE;
  --muted: #666666;
  --white: #FFFFFF;
  --bg: #F9F9F9;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: "Oswald", sans-serif;
  background:
    radial-gradient(circle at top left, var(--light), transparent 60%),
    radial-gradient(circle at bottom right, #dfeee0, transparent 55%),
    var(--bg);
  min-height: 100vh;
  padding: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.container {
  width: 100%;
  max-width: 620px;
  background: var(--white);
  padding: 28px;
  border-radius: 18px;
  box-shadow: 0 18px 40px rgba(0,0,0,0.08);
  position: relative;
}

.header {
  display: flex;
  justify-content: flex-end;
  margin-bottom: 10px;
}

.header img {
  width: 110px;
}

.titles {
  text-align: center;
  margin-bottom: 28px;
}

.title {
  font-size: 26px;
  font-weight: 500;
  color: var(--primary);
  letter-spacing: 0.5px;
}

.subtitle {
  font-size: 15px;
  color: var(--muted);
  font-weight: 300;
}

.section {
  margin-top: 22px;
  padding: 18px;
  background: #F9F9F9;
  border-radius: 14px;
  border: 1px solid #eee;
}

.section-title {
  font-size: 15px;
  font-weight: 500;
  color: var(--primary);
  margin-bottom: 14px;
  letter-spacing: 0.3px;
}

form label {
  display: block;
  margin-bottom: 14px;
  font-size: 14px;
  color: var(--primary);
}

form input {
  width: 100%;
  padding: 14px;
  margin-top: 6px;
  border-radius: 10px;
  border: 1.5px solid #ddd;
  font-size: 14px;
  transition: all 0.25s ease;
  font-family: inherit;
}

form input:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(134,184,94,0.2);
}

button {
  margin-top: 28px;
  padding: 15px;
  width: 100%;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: var(--white);
  font-size: 16px;
  font-weight: 500;
  border: none;
  border-radius: 14px;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s;
}

button:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.12);
}

button:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  box-shadow: none;
}

.message {
  margin-top: 16px;
  text-align: center;
  font-size: 14px;
  font-weight: 500;
}

@media (max-width: 500px) {
  .container {
    padding: 22px;
    border-radius: 16px;
  }

  .header img {
    width: 90px;
  }

  .title {
    font-size: 22px;
  }
}
</style>
</head>

<body>
<div class="container">
  <div class="header">
    <img src="https://infinitehse.com/wp-content/uploads/2026/01/IES_logo_with_Qiddiya-removebg.png" alt="Logo">
  </div>

  <div class="titles">
    <div class="title">Qiddiya Resort Core District</div>
    <div class="subtitle">Attach Weekly Reports</div>
  </div>

  <form id="linkForm">
    <div class="section">
      <div class="section-title">Date</div>
      <label for="date">Select Date</label>
      <input type="date" id="date" name="date" required>
    </div>

    <div class="section">
      <div class="section-title">Noise Report</div>
      <label for="noiseLink">Enter Noise Report Link</label>
      <input type="url" id="noiseLink" name="noiseLink" placeholder="https://docs.google.com/..." required>
    </div>

    <div class="section">
      <div class="section-title">PM Report</div>
      <label for="pmLink">Enter PM Report Link</label>
      <input type="url" id="pmLink" name="pmLink" placeholder="https://docs.google.com/..." required>
    </div>

    <div class="section">
      <div class="section-title">Mobile Lab</div>
      <label for="mobileLink">Enter Mobile Lab Report Link</label>
      <input type="url" id="mobileLink" name="mobileLink" placeholder="https://docs.google.com/..." required>
    </div>

    <div class="section">
      <div class="section-title">Weekly Inspection</div>
      <label for="monthlyLink">Enter Mobile Lab Report Link</label>
      <input type="url" id="monthlyLink" name="monthlyLink" placeholder="https://docs.google.com/..." required>
    </div>
    
    <button type="submit">Submit</button>
    <div class="message" id="formMessage"></div>
  </form>
</div>

<script>
// Prefill date with today
const dateInput = document.getElementById("date");
const today = new Date().toISOString().split("T")[0];
dateInput.value = today;

// Close date picker automatically after selection
dateInput.addEventListener("change", () => {
  dateInput.blur();
});

// Form submission
document.getElementById("linkForm").addEventListener("submit", async function(e){
  e.preventDefault();

  const message = document.getElementById("formMessage");
  const submitBtn = this.querySelector("button");

  // Sending state
  message.style.color = "#294145";
  message.innerText = "Sending...";
  submitBtn.disabled = true;
  submitBtn.innerText = "Sending...";

  const data = {
    date: dateInput.value,
    noiseLink: document.getElementById("noiseLink").value,
    pmLink: document.getElementById("pmLink").value,
    mobileLink: document.getElementById("mobileLink").value
    monthlyLink: document.getElementById("monthlyLink").value
  };

  try {
    const response = await fetch("https://script.google.com/macros/s/AKfycbzo87cKR-mgqKIQ6n9_niYPn82gaFAUXDNFDuts7Cv5y-sBd62cJh-bZUE7G4TPVqUHRw/exec", {
      method: "POST",
      body: JSON.stringify(data)
    });

    const result = await response.json();

    if(result.result === "success"){
      message.style.color = "#0E3B32";
      message.innerText = "✅ Submitted successfully!";
      this.reset();
      dateInput.value = today;
    } else {
      message.style.color = "red";
      message.innerText = "❌ Submission failed: " + (result.message || "");
    }

  } catch(err) {
    message.style.color = "red";
    message.innerText = "❌ Error connecting to server.";
  }

  submitBtn.disabled = false;
  submitBtn.innerText = "Submit";
});
</script>

</body>
</html>
