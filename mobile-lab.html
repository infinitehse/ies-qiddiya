<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Air Quality Monitoring Form</title>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
:root {
  --primary: #294145;
  --secondary: #5D855E;
  --accent: #86B85E;
  --light: #E6F0DE;
  --muted: #666666;
  --white: #FFFFFF;
  --bg: #F9F9F9;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: "Oswald", sans-serif;
  background:
    radial-gradient(circle at top left, var(--light), transparent 60%),
    radial-gradient(circle at bottom right, #dfeee0, transparent 55%),
    var(--bg);
  min-height: 100vh;
  padding: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.container {
  width: 100%;
  max-width: 700px;
  background: var(--white);
  padding: 28px;
  border-radius: 18px;
  box-shadow: 0 18px 40px rgba(0,0,0,0.08);
}

.header {
  display: flex;
  justify-content: flex-end;
  margin-bottom: 10px;
}
.header img { width: 110px; }

.titles { text-align: center; margin-bottom: 28px; }
.title { font-size: 26px; font-weight: 500; color: var(--primary); }
.subtitle { font-size: 15px; color: var(--muted); font-weight: 300; }

.section {
  margin-top: 22px;
  padding: 18px;
  background: #F9F9F9;
  border-radius: 14px;
  border: 1px solid #eee;
}

.section-title {
  font-size: 15px;
  font-weight: 500;
  color: var(--primary);
  margin-bottom: 14px;
}

label { display: block; margin-bottom: 12px; font-size: 14px; }

.param-line {
  display: flex;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
  margin-bottom: 10px;
}

.param-line label { flex: 1; min-width: 120px; }
.param-line input, select { flex: 1; min-width: 60px; padding: 10px; border-radius: 10px; border: 1.5px solid #ddd; }

button {
  margin-top: 28px;
  padding: 15px;
  width: 100%;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: #fff;
  font-size: 16px;
  border-radius: 14px;
  border: none;
  cursor: pointer;
}

.message { margin-top: 16px; text-align: center; }

.footer {
  margin-top: 22px;
  padding-top: 14px;
  border-top: 1px solid #eee;
  text-align: center;
  font-size: 13px;
  color: var(--muted);
  font-weight: 300;
}
.footer a { color: var(--primary); text-decoration: none; font-weight: 400; }
.footer a:hover { text-decoration: underline; }

.hidden-field { display: none; }
</style>
</head>

<body>

<div class="container">
  <div class="header">
    <img src="https://infinitehse.b-cdn.net/Companies%20Logos/IES_logo_with_Qiddiya.png">
  </div>

  <div class="titles">
    <div class="title">Qiddiya Resort Core District</div>
    <div class="subtitle">Air Quality Monitoring Form</div>
  </div>

<form id="airForm">

  <!-- POINT SELECTION -->
  <div class="section">
    <div class="section-title">Location Information</div>

    <div class="param-line">
      <label>Point #
        <select id="pointSelect" name="point" required>
          <option value="">Select Point</option>
          <option value="Point #1">Point #1</option>
          <option value="Point #2">Point #2</option>
          <option value="Point #3">Point #3</option>
          <option value="Point #4">Point #4</option>
          <option value="Point #5">Point #5</option>
          <option value="Point #6">Point #6</option>
          <option value="Point #7">Point #7</option>
          <option value="Point #8">Point #8</option>
          <option value="Point #9">Point #9</option>
          <option value="Point #10">Point #10</option>
        </select>
      </label>
      <label>Date <input type="date" id="date" name="date" required></label>
    </div>

    <!-- hidden lat/lng -->
    <input type="hidden" id="lat" name="lat">
    <input type="hidden" id="lng" name="lng">
  </div>

  <!-- DUST PARAMETERS -->
  <div class="section">
    <div class="section-title">Dust Parameters</div>

    <div class="param-line">
      <label>PM10</label>
      <input type="number" name="pm10_max" placeholder="Max">
      <input type="number" name="pm10_min" placeholder="Min">
      <input type="number" name="pm10_avg" placeholder="Avg">
    </div>
    <div class="param-line">
      <label>PM2.5</label>
      <input type="number" name="pm25_max" placeholder="Max">
      <input type="number" name="pm25_min" placeholder="Min">
      <input type="number" name="pm25_avg" placeholder="Avg">
    </div>
  </div>

  <!-- Air Gases -->
  <div class="section">
    <div class="section-title">Air Gases</div>

    <div class="param-line">
      <label>SO₂</label>
      <input type="number" name="so2_max" placeholder="Max">
      <input type="number" name="so2_min" placeholder="Min">
      <input type="number" name="so2_avg" placeholder="Avg">
    </div>

    <div class="param-line">
      <label>NO₂</label>
      <input type="number" name="no2_max" placeholder="Max">
      <input type="number" name="no2_min" placeholder="Min">
      <input type="number" name="no2_avg" placeholder="Avg">
    </div>

    <div class="param-line">
      <label>NO</label>
      <input type="number" name="no_max" placeholder="Max">
      <input type="number" name="no_min" placeholder="Min">
      <input type="number" name="no_avg" placeholder="Avg">
    </div>

    <div class="param-line">
      <label>NOx</label>
      <input type="number" name="nox_max" placeholder="Max">
      <input type="number" name="nox_min" placeholder="Min">
      <input type="number" name="nox_avg" placeholder="Avg">
    </div>

    <div class="param-line">
      <label>CO</label>
      <input type="number" name="co_max" placeholder="Max">
      <input type="number" name="co_min" placeholder="Min">
      <input type="number" name="co_8max" placeholder="8H Max">
      <input type="number" name="co_8min" placeholder="8H Min">
      <input type="number" name="co_avg" placeholder="Avg">
    </div>

    <div class="param-line">
      <label>O₃</label>
      <input type="number" name="o3_max" placeholder="Max">
      <input type="number" name="o3_min" placeholder="Min">
      <input type="number" name="o3_8max" placeholder="8H Max">
      <input type="number" name="o3_8min" placeholder="8H Min">
      <input type="number" name="o3_avg" placeholder="Avg">
    </div>
  </div>

  <!-- Weather Parameters -->
  <div class="section">
    <div class="section-title">Weather Parameters</div>

    <div class="param-line">
      <label>Temperature (°C)</label>
      <input type="number" name="temp_max" placeholder="Max">
      <input type="number" name="temp_min" placeholder="Min">
    </div>

    <div class="param-line">
      <label>Relative Humidity (%)</label>
      <input type="number" name="rh_max" placeholder="Max">
      <input type="number" name="rh_min" placeholder="Min">
    </div>

    <div class="param-line">
      <label>Barometric Pressure (mbar)</label>
      <input type="number" name="bp_max" placeholder="Max">
      <input type="number" name="bp_min" placeholder="Min">
    </div>

    <div class="param-line">
      <label>Wind Speed & Direction</label>
      <input type="number" name="ws_max" placeholder="Max Speed">
      <input type="number" name="ws_min" placeholder="Min Speed">
      <input type="number" name="wd_mean" placeholder="Mean Dir (°)">
      <input type="text" name="wd_prev" placeholder="Prevailing Dir">
    </div>
  </div>

  <button type="submit">Submit</button>
  <div class="message" id="formMessage"></div>
</form>

<div class="footer">
  Developed by <a href="https://infinitehse.com/" target="_blank">Infinite HSE</a>
</div>
</div>

<script>
// Point coordinates
const coords = {
  "Point #1": {lat:24.57575, lng:46.31689},
  "Point #2": {lat:24.57753, lng:46.32825},
  "Point #3": {lat:24.58586, lng:46.33322},
  "Point #4": {lat:24.58583, lng:46.33642},
  "Point #5": {lat:24.59040, lng:46.34241},
  "Point #6": {lat:24.59225, lng:46.33586},
  "Point #7": {lat:24.59092, lng:46.32689},
  "Point #8": {lat:24.58947, lng:46.32022},
  "Point #9": {lat:24.58889, lng:46.31181},
  "Point #10": {lat:24.57600, lng:46.30837}
};

// Fill hidden lat/lng when dropdown changes
document.getElementById("pointSelect").addEventListener("change", () => {
  const p = document.getElementById("pointSelect").value;
  if (coords[p]) {
    document.getElementById("lat").value = coords[p].lat;
    document.getElementById("lng").value = coords[p].lng;
  }
});

// Close date picker automatically after selection
const dateInput = document.getElementById("date");
dateInput.addEventListener("change", () => {
  dateInput.blur();
});

// Submit handler
document.getElementById("airForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const msg = document.getElementById("formMessage");
  msg.innerText = "Submitting...";

  const data = Object.fromEntries(new FormData(airForm).entries());

  try {
    const res = await fetch("YOUR_GOOGLE_APPS_SCRIPT_URL", {
      method: "POST",
      body: JSON.stringify(data)
    });

    const result = await res.json();
    msg.innerText = result.result === "success"
      ? "✅ Submitted successfully"
      : "❌ Submission failed";
  } catch {
    msg.innerText = "❌ Network error";
  }
});
</script>

</body>
</html>
